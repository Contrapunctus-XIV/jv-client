<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Scraping | JVClient</title><link rel="icon" href="../assets/favicon.png" type="image/png"/><meta name="description" content="Documentation for JVClient"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"><a href="https://www.npmjs.com/package/jv-client">NPM</a><a href="https://github.com/Contrapunctus-XIV/jv-client">GitHub</a></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">JVClient</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">JVClient</a></li><li><a href="Scraping.html">Scraping</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="extraction-de-données--introduction" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Extraction de données — Introduction<a href="#extraction-de-données--introduction" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Cette librairie permet d'automatiser la récupération de données portant sur les contenus hébergés sur la plateforme JVC. Il s'agit, entre autres, des articles, actualités, tests de jeu, vidéos, avis des utilisateurs, jeux vidéo, forums, topics, etc.</p>
<a id="fonctionnement-des-page-scrapers" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Fonctionnement des <em>page scrapers</em><a href="#fonctionnement-des-page-scrapers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Les <em>page scrapers</em> sont des fonctions de la librairie destinées à la récupération de données hébergées sur JVC. Elles procèdent par itération sur les pages de résultats de la requête. Ce sont les fonctions de la classe statique <a href="../classes/API.scrapers.V4.html" class="tsd-kind-class"><code>V4</code></a>, certaines méthodes des classes <a href="../classes/API.classes.Content.html" class="tsd-kind-class"><code>Content</code></a> et <a href="../classes/API.classes.Game.html" class="tsd-kind-class"><code>Game</code></a> ou encore les fonctions <a href="../classes/API.classes.Forum.html#readtopics" class="tsd-kind-method"><code>Forum.readTopics</code></a> et <a href="../classes/API.classes.Topic.html#read" class="tsd-kind-method"><code>Topic.read</code></a>.</p>
<p>En effet, côté JVC, la présentation des données se fait par <strong>pages</strong> : par exemple, si l'on souhaite obtenir la liste de tous les jeux enregistrés sur JVC, on procédera par envoi de requêtes à <strong>toutes</strong> les pages répertoriant les jeux vidéo. C'est pourquoi j'ai fait le choix que le comportement par défaut des <em>page scrapers</em> serait de renvoyer un <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/AsyncGenerator"><code>AsyncGenerator</code></a> qui itérerait à la volée sur les pages de résultats.</p>
<a id="syntaxe-pour-renvoyer-des-asyncgenerator" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Syntaxe pour renvoyer des <code>AsyncGenerator</code><a href="#syntaxe-pour-renvoyer-des-asyncgenerator" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Ainsi, la syntaxe de la requête décrite dans l'exemple ci-dessus est :</p>
<pre><code class="ts"><span class="hl-3">for</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">page</span><span class="hl-1"> </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-6">V4</span><span class="hl-1">.</span><span class="hl-0">getGames</span><span class="hl-1">()) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">page</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>L'utilisateur peut en argument des <em>page scrapers</em> spécifier un ensemble de pages à traiter : c'est le paramètre optionnel <code>paging</code> qui contient la page de début, la page de fin (par défaut <code>null</code>) et le pas entre deux pages (par défaut 1).</p>
<pre><code class="ts"><span class="hl-3">for</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">page</span><span class="hl-1"> </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-6">V4</span><span class="hl-1">.</span><span class="hl-0">getGames</span><span class="hl-1">({ </span><span class="hl-4">paging:</span><span class="hl-1"> { </span><span class="hl-4">begin:</span><span class="hl-1"> </span><span class="hl-7">5</span><span class="hl-1">, </span><span class="hl-4">end:</span><span class="hl-1"> </span><span class="hl-7">10</span><span class="hl-1">, </span><span class="hl-4">step:</span><span class="hl-1"> </span><span class="hl-7">2</span><span class="hl-1"> } })) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">page</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><span class="hl-8">// seules les pages 5, 7 et 9 seront traitées</span>
</code><button type="button">Copy</button></pre>

<p>La valeur de <code>end</code> peut être <code>null</code> si l'on souhaite parcourir toutes les pages après <code>begin</code> jusqu'à la fin.</p>
<div class="tsd-alert tsd-alert-note"><div class="tsd-alert-title"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="../assets/icons.svg#icon-alertNote"></use></svg><span>Note</span></div><p>
La numérotation des pages commence à 1.</p>
</div>
<a id="syntaxe-pour-renvoyer-des-promise" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Syntaxe pour renvoyer des <code>Promise</code><a href="#syntaxe-pour-renvoyer-des-promise" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Il peut arriver que l'utilisateur n'ait besoin que de récupérer les résultats d'une page précise. Il peut alors renseigner le numéro de page grâce au paramètre optionnel <code>page</code> et il récupérera ainsi une <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> :</p>
<pre><code class="ts"><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-6">V4</span><span class="hl-1">.</span><span class="hl-0">getGames</span><span class="hl-1">({ </span><span class="hl-4">page:</span><span class="hl-1"> </span><span class="hl-7">2</span><span class="hl-1"> }));</span>
</code><button type="button">Copy</button></pre>

<div class="tsd-alert tsd-alert-important"><div class="tsd-alert-title"><svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="../assets/icons.svg#icon-alertImportant"></use></svg><span>Important</span></div><p>
Les paramètres <code>page</code> et <code>paging</code> s'excluent.</p>
</div>
<a id="objets-json-ou-instances-" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Objets JSON ou instances ?<a href="#objets-json-ou-instances-" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Lorsqu'il s'agit de récupérer des données, les <em>page scrapers</em> renvoient par défaut des instances des classes fournies par la librairie (comme <a href="../classes/API.classes.Game.html" class="tsd-kind-class"><code>Game</code></a> dans l'exemple précédent). Mais il peut arriver que l'utilisateur n'ait besoin que de lire directement les données renvoyées par le site, sans passer par les classes de la librairie. Ainsi, il suffira de mettre à <code>true</code> le paramètre optionnel <code>raw</code> (booléen) :</p>
<pre><code class="ts"><span class="hl-3">for</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">page</span><span class="hl-1"> </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-6">V4</span><span class="hl-1">.</span><span class="hl-0">getGames</span><span class="hl-1">({ </span><span class="hl-4">raw:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1"> })) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">page</span><span class="hl-1">); </span><span class="hl-8">// page est un objet brut, renvoyé par JVC</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Ici, <code>page</code> sera du type <a href="../interfaces/API.types.V4Types.Games.Raw.html" class="tsd-kind-interface"><code>V4Types.Games.Raw</code></a>.</p>
<a id="query" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><em>Query</em><a href="#query" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Enfin, les <em>page scrapers</em> de la classe statique <a href="../classes/API.scrapers.V4.html" class="tsd-kind-class"><code>V4</code></a> contiennent un paramètre supplémentaire, le paramètre <code>query</code>, qui prend un objet associant aux critères de recherche appropriés la valeur souhaitée pour affiner les résultats.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#extraction-de-données--introduction"><span>Extraction de données — <wbr/>Introduction</span></a><ul><li><a href="#fonctionnement-des-page-scrapers"><span>Fonctionnement des page scrapers</span></a></li><li><ul><li><a href="#syntaxe-pour-renvoyer-des-asyncgenerator"><span>Syntaxe pour renvoyer des <wbr/>Async<wbr/>Generator</span></a></li><li><a href="#syntaxe-pour-renvoyer-des-promise"><span>Syntaxe pour renvoyer des <wbr/>Promise</span></a></li><li><a href="#objets-json-ou-instances-"><span>Objets JSON ou instances ?</span></a></li><li><a href="#query"><span>Query</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://www.npmjs.com/package/jv-client" class="tsd-nav-link">NPM</a><a href="https://github.com/Contrapunctus-XIV/jv-client" class="tsd-nav-link">GitHub</a></nav><nav class="tsd-navigation"><a href="../modules.html">JVClient</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
